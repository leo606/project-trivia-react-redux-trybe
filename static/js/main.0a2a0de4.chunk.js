(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{30:function(e,t){},32:function(e,t,n){e.exports=n.p+"static/media/trivia.466d153e.png"},34:function(e,t,n){e.exports=n(55)},44:function(e,t){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(21),s=n.n(c),i=n(9),o=n(16),u=n(19),l=n(28),p=n(29),m=n(30),d=n.n(m),f=n(15),h=n(2),v=n.n(h),b=n(11),y=n(31),g=n.n(y),E=function(){if(!localStorage.getItem("ranking")){var e=JSON.stringify([]);localStorage.setItem("ranking",e)}},O=function(){var e=JSON.parse(localStorage.getItem("token"));return e||"no token in storage"},S=function(e){var t=JSON.stringify(e);localStorage.setItem("token",t)},k=function(){var e=Object(b.a)(v.a.mark((function e(){var t,n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://opentdb.com/api_token.php?command=request");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,a=n.token,S(a),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(b.a)(v.a.mark((function e(t,n){var a,r,c,s,i,o,u,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=3,r=n.selectedCategory,c=n.selectedDifficulty,s=n.selectedType,i="".concat("https://opentdb.com/api.php?encode=base64&amount=5&token=").concat(t,"&category=").concat(r,"&difficulty=").concat(c,"&type=").concat(s),e.next=5,fetch(i);case 5:return o=e.sent,e.next=8,o.json();case 8:if((u=e.sent).response_code!==a){e.next=11;break}return e.abrupt("return","token expired");case 11:return(l=u.results).forEach((function(e){e.question=window.atob(e.question),e.category=window.atob(e.category),e.type=window.atob(e.type),e.difficulty=window.atob(e.difficulty),e.correct_answer=window.atob(e.correct_answer),e.incorrect_answers[0]=window.atob(e.incorrect_answers[0]),e.incorrect_answers.length>1&&(e.incorrect_answers[1]=window.atob(e.incorrect_answers[1]),e.incorrect_answers[2]=window.atob(e.incorrect_answers[2]))})),e.abrupt("return",l);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(b.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("no token in storage"!==(n=O())){e.next=5;break}return e.next=4,k();case 4:n=e.sent;case 5:return e.next=7,j(n,t);case 7:if("token expired"!==(a=e.sent)){e.next=15;break}return e.next=11,k();case 11:return n=e.sent,e.next=14,j(n);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(b.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g()(t).toString(),e.next=3,fetch("https://www.gravatar.com/avatar/".concat(n));case 3:return a=e.sent,e.abrupt("return",a.url);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(e){return{type:"SAVE_AVATAR",avatar:e}},x=function(e){return{type:"SAVE_TOKEN",token:e}},A={name:"",assertions:0,score:0,gravatarEmail:"",gravatarUrl:""},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER":return Object(f.a)({},e,{name:t.user.name,gravatarEmail:t.user.email});case"INCREASE_SCORE":return Object(f.a)({},e,{score:e.score+t.points});case"INCREASE_ASSERTIONS":return Object(f.a)({},e,{assertions:e.assertions+1});case"SAVE_AVATAR":return Object(f.a)({},e,{gravatarUrl:t.avatar});case"RESET_ASSERTIONS":return Object(f.a)({},e,{assertions:0,score:0});default:return e}},N={time:30,stopTime:!1,score:0,amount:5,token:"",categories:[],questions:[],selectedCategory:"",selectedDifficulty:"",selectedType:""},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DECREASE_TIME":return Object(f.a)({},e,{time:e.time-1});case"STOP_TIME":return Object(f.a)({},e,{stopTime:!0});case"RESET_TIME":return Object(f.a)({},e,{time:30,stopTime:!1});case"SAVE_CATEGORIES":return Object(f.a)({},e,{categories:t.categories});case"SAVE_SETTINGS":return Object(f.a)({},e,{},t.settings);case"SAVE_TOKEN":return Object(f.a)({},e,{token:t.token});default:return e}},D=Object(u.combineReducers)({user:d.a,game:I,player:_}),R=Object(u.createStore)(D,Object(l.composeWithDevTools)(Object(u.applyMiddleware)(p.a)));window.Cypress&&(window.store=R);var q=R,H=n(4),M=n(5),B=n(7),J=n(6),P=n(3),F=n(18),U=n(8),V=(n(45),n(32)),Q=n.n(V),G=function(e){Object(B.a)(n,e);var t=Object(J.a)(n);function n(e){var a;return Object(H.a)(this,n),(a=t.call(this,e)).state={email:"",name:"",btnDisable:!0},a.onChangeHandler=a.onChangeHandler.bind(Object(U.a)(a)),a.onClickHandler=a.onClickHandler.bind(Object(U.a)(a)),a}return Object(M.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.tokenFetch)()}},{key:"onChangeHandler",value:function(e){var t=this,n=e.target;this.setState(Object(F.a)({},n.name,n.value),(function(){var e=t.state,n=e.email,a=e.name;n.length&&a.length?t.setState({btnDisable:!1}):t.setState({btnDisable:!0})}))}},{key:"onClickHandler",value:function(){var e=Object(b.a)(v.a.mark((function e(){var t,n,a,r,c,s,i,o,u,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.add,a=t.history,r=t.playerState,c=t.avatarFetch,s=t.resetTimeAction,i=t.resetAssertionsAction,o=this.state,u=o.email,l=o.name,e.next=4,n({email:u,name:l});case 4:return e.next=6,c(u);case 6:localStorage.setItem("state",JSON.stringify({player:r})),a.push("/game"),s(),i();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.email,n=e.name,a=e.btnDisable,c=this.props.history;return r.a.createElement("div",{className:"login"},r.a.createElement("div",null,r.a.createElement("img",{src:Q.a,alt:""})),r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"email-input"},r.a.createElement("input",{type:"email","data-testid":"input-gravatar-email",id:"email-input",name:"email",placeholder:"Email",value:t,onChange:this.onChangeHandler})),r.a.createElement("label",{htmlFor:"name-input"},r.a.createElement("input",{type:"name","data-testid":"input-player-name",id:"name-input",name:"name",placeholder:"Apelido",value:n,onChange:this.onChangeHandler})),r.a.createElement("input",{className:"jogar-btn",type:"button","data-testid":"btn-play",disabled:a,value:"Jogar",onClick:this.onClickHandler})),r.a.createElement("input",{"data-testid":"btn-settings",type:"button",value:"Settings",onClick:function(){return c.push("/settings")}}))}}]),n}(r.a.Component),L=Object(i.b)((function(e){return{playerState:e.player}}),(function(e){return{add:function(t){return e(function(e){return{type:"ADD_USER",user:e}}(t))},avatarFetch:function(t){return e(function(e){return function(){var t=Object(b.a)(v.a.mark((function t(n){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w(e);case 3:a=t.sent,n(C(a)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}(t))},tokenFetch:function(){return e(function(){var e=Object(b.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k();case 3:n=e.sent,t(x(n)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())},resetTimeAction:function(){return e({type:"RESET_TIME"})},resetAssertionsAction:function(){return e({type:"RESET_ASSERTIONS"})}}}))(G),K=(n(46),function(e){Object(B.a)(n,e);var t=Object(J.a)(n);function n(e){var a;return Object(H.a)(this,n),(a=t.call(this,e)).state={selectedCategory:"",selectedDifficulty:"",selectedType:""},a.onChangeHandler=a.onChangeHandler.bind(Object(U.a)(a)),a.onClickHandler=a.onClickHandler.bind(Object(U.a)(a)),a}return Object(M.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.categoriesFetch)()}},{key:"onChangeHandler",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(F.a)({},n,a))}},{key:"onClickHandler",value:function(){var e=this.props,t=e.settingsSave,n=e.history;t(this.state),n.push("/")}},{key:"render",value:function(){var e=this.state,t=e.selectedCategory,n=e.selectedDifficulty,a=e.selectedType,c=this.props.categories;return r.a.createElement("div",{className:"settings"},r.a.createElement("h1",{"data-testid":"settings-title"},"Settings"),r.a.createElement("form",{action:""},r.a.createElement("label",{htmlFor:"selectedCategory-select"},"Category",r.a.createElement("select",{name:"selectedCategory",id:"selectedCategory-select",value:t,onChange:this.onChangeHandler},c.map((function(e){var t=e.id,n=e.name;return r.a.createElement("option",{key:t,value:t},n)})))),r.a.createElement("label",{htmlFor:"selectedDifficulty-select"},"Difficulty",r.a.createElement("select",{name:"selectedDifficulty",id:"selectedDifficulty-select",value:n,onChange:this.onChangeHandler},r.a.createElement("option",{value:"easy"},"Easy"),r.a.createElement("option",{value:"medium"},"Medium"),r.a.createElement("option",{value:"hard"},"Hard"))),r.a.createElement("label",{htmlFor:"selectedType-select"},"Type",r.a.createElement("select",{name:"selectedType",id:"selectedType-select",value:a,onChange:this.onChangeHandler},r.a.createElement("option",{value:"multiple"},"Multiple"),r.a.createElement("option",{value:"boolean"},"Boolean"))),r.a.createElement("input",{type:"button",value:"Save",onClick:this.onClickHandler})))}}]),n}(r.a.Component)),W=Object(i.b)((function(e){return{categories:e.game.categories}}),(function(e){return{categoriesFetch:function(){return e(function(){var e=Object(b.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://opentdb.com/api_category.php");case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,t({type:"SAVE_CATEGORIES",categories:a.trivia_categories}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}())},settingsSave:function(t){return e(function(e){return{type:"SAVE_SETTINGS",settings:e}}(t))}}}))(K),z=n(23),X=(n(47),function(e){Object(B.a)(n,e);var t=Object(J.a)(n);function n(){return Object(H.a)(this,n),t.apply(this,arguments)}return Object(M.a)(n,[{key:"render",value:function(){var e=this.props,t=e.userName,n=e.score,a=e.gravatarUrl;return r.a.createElement("header",null,r.a.createElement("div",{className:"userInfo"},r.a.createElement("img",{"data-testid":"header-profile-picture",className:"avatar",src:a,alt:"Icone do Avatar"}),r.a.createElement("h2",{"data-testid":"header-player-name",className:"userName"},"Jogador: ".concat(t))),r.a.createElement("div",{className:"scoreBoard"},r.a.createElement("h4",{"data-testid":"header-score",className:"score"},n)))}}]),n}(r.a.Component)),Y=Object(i.b)((function(e){return{userName:e.player.name,score:e.player.score,gravatarUrl:e.player.gravatarUrl}}))(X),Z=(n(48),n(49),function(e){Object(B.a)(n,e);var t=Object(J.a)(n);function n(){var e;return Object(H.a)(this,n),(e=t.call(this)).nextQuestion=e.nextQuestion.bind(Object(U.a)(e)),e}return Object(M.a)(n,[{key:"nextQuestion",value:function(){var e=this.props,t=e.funct,n=e.resetStyles;t(),n()}},{key:"render",value:function(){return r.a.createElement("input",{className:"next-button",type:"button",value:"Pr\xf3xima","data-testid":"btn-next",onClick:this.nextQuestion})}}]),n}(r.a.Component)),$=function(e){Object(B.a)(n,e);var t=Object(J.a)(n);function n(e){var a;return Object(H.a)(this,n),(a=t.call(this,e)).state={answers:[],correctBtnClass:"",incorrectBtnClass:"",answered:!1},a.shuffleAnswers=a.shuffleAnswers.bind(Object(U.a)(a)),a.checkAnswer=a.checkAnswer.bind(Object(U.a)(a)),a.resetButtonStyles=a.resetButtonStyles.bind(Object(U.a)(a)),a.savePlayerToStorage=a.savePlayerToStorage.bind(Object(U.a)(a)),a.savePoints=a.savePoints.bind(Object(U.a)(a)),a}return Object(M.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.playerState;this.shuffleAnswers(),localStorage.setItem("state",JSON.stringify({player:e}))}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.question,a=t.isToStopTime,r=this.state.answered;e.question.correct_answer!==n.correct_answer&&this.shuffleAnswers(),a&&!r&&this.checkAnswer({target:{value:"errado"}})}},{key:"resetButtonStyles",value:function(){this.setState({correctBtnClass:"",incorrectBtnClass:""})}},{key:"shuffleAnswers",value:function(){var e=this.props.question,t=[].concat(Object(z.a)(e.incorrect_answers),[e.correct_answer]);t.sort((function(){return Math.random()-.5})),this.setState({answers:t,answered:!1})}},{key:"savePoints",value:function(){var e=Object(b.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.addPoints,e.next=3,n(t);case 3:this.savePlayerToStorage();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"savePlayerToStorage",value:function(){var e=this.props.playerState;localStorage.setItem("state",JSON.stringify({player:e}))}},{key:"checkAnswer",value:function(e){var t=e.target,n=this.props,a=n.question,r=n.stopTheTimer,c=n.timer,s=n.corretAnswer,i=a.difficulty;if(r(),t.value===a.correct_answer){var o=10+c*(["easy","medium","hard"].indexOf(i)+1);this.savePoints(o),s()}this.setState({correctBtnClass:"correct-btn",incorrectBtnClass:"incorrect-btn",answered:!0})}},{key:"render",value:function(){var e=this;E();var t=this.props,n=t.question,a=t.isToStopTime,c=t.funct,s=this.state,i=s.answers,o=s.correctBtnClass,u=s.incorrectBtnClass,l=s.answered;return r.a.createElement("div",{className:"question"},r.a.createElement("h3",{"data-testid":"question-category"},n.category),r.a.createElement("p",{"data-testid":"question-text"},n.question),i.map((function(t){var c=t===n.correct_answer;return r.a.createElement("input",{key:t,"data-testid":c?"correct-answer":"wrong-answer-".concat(n.incorrect_answers.indexOf(t)),type:"button",value:t,className:"answer ".concat(c?o:u),onClick:e.checkAnswer,disabled:a})})),l?r.a.createElement(Z,{resetStyles:this.resetButtonStyles,funct:c}):null)}}]),n}(r.a.Component),ee=Object(i.b)((function(e){return{isToStopTime:e.game.stopTime,timer:e.game.time,playerState:e.player}}),(function(e){return{stopTheTimer:function(){return e({type:"STOP_TIME"})},addPoints:function(t){return e(function(e){return{type:"INCREASE_SCORE",points:e}}(t))},corretAnswer:function(){return e({type:"INCREASE_ASSERTIONS"})}}}))($),te=(n(50),[]),ne=function(e){Object(B.a)(n,e);var t=Object(J.a)(n);function n(){var e;return Object(H.a)(this,n),(e=t.call(this)).updateTheTime=e.updateTheTime.bind(Object(U.a)(e)),e}return Object(M.a)(n,[{key:"componentDidMount",value:function(){var e=setInterval(this.updateTheTime,1e3);te.push(e)}},{key:"componentDidUpdate",value:function(e){var t=this.props.isToStopTime;if(e.isToStopTime!==t){var n=setInterval(this.updateTheTime,1e3);te.push(n)}}},{key:"updateTheTime",value:function(){var e=this.props,t=e.currentTime,n=e.isToStopTime,a=e.descrease,r=e.stop;0===t||n?(r(),te.forEach(clearInterval)):a()}},{key:"timerClassName",value:function(e){return e>10?e%2===0?"timer timer-even":"timer timer-odd":e%2===0?"timer timer-ten-sec-even":"timer timer-ten-sec-odd"}},{key:"render",value:function(){var e=this.props.currentTime;return r.a.createElement("div",{className:this.timerClassName(e)},"Tempo Restante: ".concat(e))}}]),n}(r.a.Component),ae=Object(i.b)((function(e){return{currentTime:e.game.time,isToStopTime:e.game.stopTime}}),(function(e){return{descrease:function(){return e({type:"DECREASE_TIME"})},stop:function(){return e({type:"STOP_TIME"})}}}))(ne),re=function(e){Object(B.a)(n,e);var t=Object(J.a)(n);function n(e){var a;return Object(H.a)(this,n),(a=t.call(this,e)).state={questions:null,isLoading:!0,questionIndex:0},a.nextQ=a.nextQ.bind(Object(U.a)(a)),a}return Object(M.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.settings;T(t).then((function(t){return e.setState({questions:t,isLoading:!1})}))}},{key:"componentWillUnmount",value:function(){E();var e=JSON.parse(localStorage.getItem("state")),t=JSON.parse(localStorage.getItem("ranking")),n=[].concat(Object(z.a)(t),[e]);n.sort((function(e,t){return t.player.score-e.player.score}));var a=JSON.stringify(n);localStorage.setItem("ranking",a)}},{key:"nextQ",value:function(){var e=this.props.resetTimer;this.setState((function(e){return{questionIndex:e.questionIndex+1}})),e()}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.questions,a=e.questionIndex;return 5===a?r.a.createElement(P.a,{to:"/feedback"}):r.a.createElement("div",null,r.a.createElement(Y,null),r.a.createElement(ae,null),t?r.a.createElement("p",null,"Loading..."):r.a.createElement(ee,{funct:this.nextQ,question:n[a]}))}}]),n}(r.a.Component),ce=Object(i.b)((function(e){return{question:e.game.questions,settings:{selectedCategory:e.game.selectedCategory,selectedDifficulty:e.game.selectedDifficulty,selectedType:e.game.selectedType}}}),(function(e){return{resetTimer:function(){return e({type:"RESET_TIME"})}}}))(re),se=(n(52),function(e){Object(B.a)(n,e);var t=Object(J.a)(n);function n(){return Object(H.a)(this,n),t.apply(this,arguments)}return Object(M.a)(n,[{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("ranking"));return r.a.createElement("div",{className:"ranking"},r.a.createElement("h1",{"data-testid":"ranking-title"},"Ranking"),r.a.createElement("ol",null,e.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("p",null,"".concat(t+1,".")),r.a.createElement("p",{className:"ranking-mid","data-testid":"player-name-".concat(t)},e.player.name),r.a.createElement("p",{"data-testid":"player-score-".concat(t)},e.player.score),r.a.createElement("img",{src:e.player.gravatarUrl,alt:"Avatar"}))}))),r.a.createElement(o.b,{to:"/","data-testid":"btn-go-home"},r.a.createElement("button",{type:"button"},"Tela inicial")))}}]),n}(r.a.Component)),ie=(n(53),function(e){Object(B.a)(n,e);var t=Object(J.a)(n);function n(){return Object(H.a)(this,n),t.apply(this,arguments)}return Object(M.a)(n,[{key:"render",value:function(){var e=this.props.player,t=e.assertions,n=e.score;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y,null),r.a.createElement("section",{className:"feedback"},r.a.createElement("h1",{"data-testid":"feedback-text"},t>=3?"Mandou bem!":"Podia ser melhor..."),r.a.createElement("p",null,"Voc\xea acertou",r.a.createElement("span",{"data-testid":"feedback-total-question"}," ",t," "),1===t?"quest\xe3o":"quest\xf5es"),r.a.createElement("p",null,"Um total de",r.a.createElement("span",{"data-testid":"feedback-total-score"}," ",n," "),"pontos."),r.a.createElement("div",null,r.a.createElement(o.b,{to:"/ranking"},r.a.createElement("button",{type:"button","data-testid":"btn-ranking"},"Ver Ranking")),r.a.createElement(o.b,{to:"/"},r.a.createElement("button",{type:"button","data-testid":"btn-play-again"},"Jogar Novamente")))))}}]),n}(r.a.Component)),oe=Object(i.b)((function(e){return{player:e.player}}),null)(ie),ue=(n(54),function(e){Object(B.a)(n,e);var t=Object(J.a)(n);function n(){return Object(H.a)(this,n),t.apply(this,arguments)}return Object(M.a)(n,[{key:"render",value:function(){return E(),r.a.createElement(P.d,null,r.a.createElement(P.b,{exact:!0,path:"/settings",render:function(e){return r.a.createElement(W,e)}}),r.a.createElement(P.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(L,e)}}),r.a.createElement(P.b,{exact:!0,path:"/game",render:function(e){return r.a.createElement(ce,e)}}),r.a.createElement(P.b,{exact:!0,path:"/ranking",render:function(e){return r.a.createElement(se,e)}}),r.a.createElement(P.b,{exact:!0,path:"/feedback",render:function(e){return r.a.createElement(oe,e)}}))}}]),n}(r.a.Component));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{store:q},r.a.createElement(o.a,{basename:"/project-trivia-react-redux-trybe"},r.a.createElement(ue,null)))),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.0a2a0de4.chunk.js.map